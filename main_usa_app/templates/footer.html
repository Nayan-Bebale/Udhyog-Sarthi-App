{% load static %}

<footer>


    <div class="container-fluid bg-dark text-white-50 footer pt-5 mt-5 wow fadeIn" data-wow-delay="0.1s">
        <div class="container py-5">
            <div class="row g-5">
                <div class="col-lg-3 col-md-6">
                    <h5 class="text-white mb-4">Get In Touch</h5>
                    <p class="mb-2"><i class="fa fa-map-marker-alt me-3"></i>Indore, Madhya Pradesh, India</p>
                    <p class="mb-2"><i class="fa fa-phone-alt me-3"></i>+012 345 67890</p>
                    <p class="mb-2"><i class="fa fa-envelope me-3"></i>coderofml143@gmail.com</p>
                    <div class="d-flex pt-2">
                        <a class="btn btn-outline-light btn-social" href=""><i class="fab fa-twitter"></i></a>
                        <a class="btn btn-outline-light btn-social" href=""><i class="fab fa-facebook-f"></i></a>
                        <a class="btn btn-outline-light btn-social" href=""><i class="fab fa-youtube"></i></a>
                        <a class="btn btn-outline-light btn-social" href=""><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <h5 class="text-white mb-4">Quick Links</h5>
                    <a class="btn btn-link text-white-50" href="/about">About Us</a>
                    <a class="btn btn-link text-white-50" href="/contact">Contact Us</a>
                    <a class="btn btn-link text-white-50" href="/">Our Services</a>
                    <a class="btn btn-link text-white-50" href="">Privacy Policy</a>
                    <a class="btn btn-link text-white-50" href="">Terms & Condition</a>
                </div>
                <div class="col-lg-3 col-md-6">
                    <h5 class="text-white mb-4">Photo Gallery</h5>
                    <div class="row g-2 pt-2">
                        <div class="col-4">
                            <img class="img-fluid rounded bg-light p-1" src="{% static 'img/property-1.jpg' %}" alt="">
                        </div>
                        <div class="col-4">
                            <img class="img-fluid rounded bg-light p-1" src="{% static 'img/property-2.jpg' %}" alt="">
                        </div>
                        <div class="col-4">
                            <img class="img-fluid rounded bg-light p-1" src="{% static 'img/property-3.jpg' %}" alt="">
                        </div>
                        <div class="col-4">
                            <img class="img-fluid rounded bg-light p-1" src="{% static 'img/property-4.jpg' %}" alt="">
                        </div>
                        <div class="col-4">
                            <img class="img-fluid rounded bg-light p-1" src="{% static 'img/property-5.jpg' %}" alt="">
                        </div>
                        <div class="col-4">
                            <img class="img-fluid rounded bg-light p-1" src="{% static 'img/property-6.jpg' %}" alt="">
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <h5 class="text-white mb-4">Newsletter</h5>
                    <p>Dolor amet sit justo amet elitr clita ipsum elitr est.</p>
                    <div class="position-relative mx-auto" style="max-width: 400px;">
                        <input class="form-control bg-transparent w-100 py-3 ps-4 pe-5" type="text" placeholder="Your email">
                        <button type="button" class="btn btn-primary py-2 position-absolute top-0 end-0 mt-2 me-2">SignUp</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- <div class="container">
            <div class="copyright">
                <div class="row">
                    <div class="col-md-6 text-center text-md-start mb-3 mb-md-0">
                        &copy; <a class="border-bottom" href="#">UDYOG SARTHI</a>, All Right Reserved. 
                        
                        
                        Designed By <a class="border-bottom" href="">Pack of Geeks</a>
                    </div>
                    <div class="col-md-6 text-center text-md-end">
                        <div class="footer-menu">
                            <a href="">Home</a>
                            <a href="">Cookies</a>
                            <a href="">Help</a>
                            <a href="">FQAs</a>
                        </div>
                    </div>
                </div>
            </div>
        </div> -->
    </div>
    </footer>
<!-- Footer End -->


<!-- Back to Top -->
<a href="#" class="btn btn-lg btn-primary btn-lg-square back-to-top"><i class="bi bi-arrow-up"></i></a>

</div>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
    // Dictionary of top NGOs by city
    const topNGOs = {
        "Mumbai": [
            { name: "NGO A", address: "Address 1, Mumbai", lat: 19.0760, lon: 72.8777 },
            { name: "NGO B", address: "Address 2, Mumbai", lat: 19.0761, lon: 72.8778 }
        ],
        "Delhi": [
            { name: "NGO C", address: "Address 1, Delhi", lat: 28.7041, lon: 77.1025 },
            { name: "NGO D", address: "Address 2, Delhi", lat: 28.7042, lon: 77.1026 }
        ],
        "Bangalore": [
            { name: "NGO E", address: "Address 1, Bangalore", lat: 12.9716, lon: 77.5946 },
            { name: "NGO F", address: "Address 2, Bangalore", lat: 12.9717, lon: 77.5947 }
        ],
        "Bhopal": [
        { name: "Sambhavna Trust Clinic", address: "Near Union Carbide Plant, Bhopal, Madhya Pradesh", lat: 23.2856, lon: 77.4189 },
        { name: "Nitya Seva Society", address: "Chandbarh, Bhopal, Madhya Pradesh", lat: 23.2543, lon: 77.4025 }
        ],
        "Dewas": [
            { name: "Sewa Sadan Eye Hospital", address: "Agra-Bombay Road, Dewas, Madhya Pradesh", lat: 22.9658, lon: 76.0553 },
            { name: "Gramin Vikas Trust", address: "MG Road, Dewas, Madhya Pradesh", lat: 22.9659, lon: 76.0555 }
        ],
        "Ratlam": [
            { name: "Aastha Welfare Society", address: "Sailana Road, Ratlam, Madhya Pradesh", lat: 23.3303, lon: 75.0403 },
            { name: "Navjyoti Sansthan", address: "Station Road, Ratlam, Madhya Pradesh", lat: 23.3315, lon: 75.0430 }
        ],
        "Ujjain": [
            { name: "Sankalp Samiti", address: "Dewas Road, Ujjain, Madhya Pradesh", lat: 23.1765, lon: 75.7887 },
            { name: "Sahyog Society", address: "Indore Road, Ujjain, Madhya Pradesh", lat: 23.1766, lon: 75.7888 }
        ],
        "Indore": [
            { name: "Self Realization Education Society NGO", address: "157, Mahadev Totla Nagar, Kanadia Road, Indore", lat: 22.7549506, lon: 75.8886146 },
            { name: "Shri Shri Vidhyadham Adhyatmik Parmarthik Avm Shekshanik Trust NGO", address: "Shri Shrvidhyadmam Adhayatmik Parmarthik Avm Shekshanik Trust, Airport Road, Indore, Mp. Pin- 452005", lat: 22.7755364, lon: 75.807152 },
            { name: "Narayan Seva Sansthan", address: "PVHX+Q79, Chandralok Colony, Indore, Madhya Pradesh 452018", lat: 22.7755258, lon: 75.8071519 },
            { name: "Ek Kadam Madad Ki Or Seva Samiti", address: "22/1, Telephone Exchange Road, Rasoma Chouraha, Adarsh Meghdoot Nagar, Indore, Madhya Pradesh 452010", lat: 22.7755258, lon: 75.8071519 },
            { name: "Janvikas Society", address: "Janvikas Society, Ashram Campus, Palda, Indore, Madhya Pradesh 452020", lat: 22.6925096, lon: 75.7644466 },
        ],
        "Pune": [
            { name: "Sanjivani NGO in Pune", address: "SR NO 59/1A, SULAI COMPLEX, FLAT NO 17, near DESAI HOSPITAL, Mohammed Wadi, Pune, Maharashtra 411060", lat: 18.5204558, lon: 73.8182307 },
            { name: "Me the change - NGO", address: "160, Gaothan, Shivajinagar, Pune, Maharashtra 411005", lat: 18.5204558, lon: 73.8182307 },
        ],
        "Chennai": [
            { name: "NGO K", address: "Address 1, Chennai", lat: 13.0827, lon: 80.2707 },
            { name: "NGO L", address: "Address 2, Chennai", lat: 13.0828, lon: 80.2708 }
        ],
        "Kolkata": [
            { name: "NGO M", address: "Address 1, Kolkata", lat: 22.5726, lon: 88.3639 },
            { name: "NGO N", address: "Address 2, Kolkata", lat: 22.5727, lon: 88.3640 }
        ]
    };

    // Function to get the user's location
    function getLocation() {
        if (!navigator.geolocation) {
            alert("Geolocation is not supported by your browser.");
            return;
        }
        document.getElementById("status").innerText = "Fetching your location...";

        // Get the user's current position
        navigator.geolocation.getCurrentPosition(
            (position) => {
                const lat = position.coords.latitude;
                const lon = position.coords.longitude;
                document.getElementById("status").innerText = "Location found! Finding your city...";
                getCityName(lat, lon); // Get the city name from coordinates
            },
            (error) => {
                document.getElementById("status").innerText = "Error: " + error.message;
            }
        );
    }

    // Function to get the city name using Nominatim API
    function getCityName(lat, lon) {
        const url = `https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lon}`;

        fetch(url)
            .then(response => response.json())
            .then(data => {
                const city = data.address?.city || data.address?.town || data.address?.village || "Unknown City";
                document.getElementById("status").innerText = `You are in ${city}. Displaying top NGOs...`;
                showTopNGOs(city); // Show top NGOs in the city
            })
            .catch(error => {
                document.getElementById("status").innerText = "Error fetching city: " + error.message;
            });
    }

    // Function to show top NGOs in the city
    function showTopNGOs(city) {
        const ngos = topNGOs[city] || [];
        const list = document.getElementById("ngoList");
        list.innerHTML = ""; // Clear previous results

        if (ngos.length === 0) {
            list.innerHTML = "<p>No top NGOs found for this city.</p>";
            return;
        }

        // Initialize the map
        const map = L.map('map').setView([ngos[0].lat, ngos[0].lon], 12);

        // Add OpenStreetMap tiles
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '© OpenStreetMap contributors'
        }).addTo(map);

        // Add markers for each NGO
        ngos.forEach(ngo => {
            const marker = L.marker([ngo.lat, ngo.lon]).addTo(map);
            marker.bindPopup(`<b>${ngo.name}</b><br>${ngo.address}`);

            // Add NGO to the list
            const listItem = document.createElement("li");
            listItem.innerHTML = `
                <strong>${ngo.name}</strong><br>
                ${ngo.address}<br>
                <button onclick="showOnMap(${ngo.lat}, ${ngo.lon})" class="btn btn-sm btn-primary">View on Map</button>
            `;
            list.appendChild(listItem);
        });

        document.getElementById("status").innerText = `Found ${ngos.length} top NGOs in ${city}!`;
    }

    // Function to show NGO location on the map
    function showOnMap(lat, lon) {
        const map = L.map('map').setView([lat, lon], 15); // Zoom in to the NGO location

        // Add OpenStreetMap tiles
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '© OpenStreetMap contributors'
        }).addTo(map);

        // Add a marker for the NGO
        L.marker([lat, lon]).addTo(map)
            .bindPopup(`<b>NGO Location</b><br>Lat: ${lat}, Lon: ${lon}`)
            .openPopup();
    }
</script>

<!-- JavaScript Libraries -->
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="{% static 'lib/wow/wow.min.js' %}"></script>
<script src="{% static 'lib/easing/easing.min.js' %}"></script>
<script src="{% static 'lib/waypoints/waypoints.min.js' %}"></script>
<script src="{% static 'lib/owlcarousel/owl.carousel.min.js' %}"></script>

<script type="text/javascript" src="{% static 'ckeditor/ckeditor-init.js' %}"></script>
<script type="text/javascript" src="{% static 'ckeditor/ckeditor/ckeditor.js' %}"></script>


<script src="{% static 'js/main.js' %}"></script>
<script src="{% static 'js/audio.js' %}"></script>
<script src="https://code.responsivevoice.org/responsivevoice.js?key=YwfiFEki"></script>
</body>

</html>